(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{30:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),o=n(21),s=n.n(o),r=n(9),c=(n(30),n(24)),u=n(2),l=n(3),p=n.p+"static/media/Vector.bbe2a6ea.svg",d=n(0);var b=function(e){return Object(d.jsx)("div",{className:"header__burger-menu ".concat(e.activeBurger?"header__burger-menu_active":""),children:e.children})};var m=function(e){function t(){window.innerWidth>769&&s(!1)}i.a.useEffect((function(){window.addEventListener("resize",t)}),[]);var n=i.a.useState(!1),a=Object(u.a)(n,2),o=a[0],s=a[1],c=Object(l.g)().pathname,m="".concat("/sign-in"===c?"/sign-up":"/sign-in"),h="".concat("/sign-in"===c?"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f":"\u0412\u043e\u0439\u0442\u0438"),j=Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("p",{className:"header__navigation",children:e.email}),Object(d.jsx)("button",{className:"header__navigation-button",to:"/sign-in",onClick:function(){e.setLoggedIn(!1),localStorage.removeItem("jwt"),e.history.push("/sign-in")},children:"\u0412\u044b\u0439\u0442\u0438"})]});return i.a.useEffect((function(){s(!o)}),[e.loggedIn]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(b,{activeBurger:o,children:j}),Object(d.jsxs)("header",{className:"header ".concat(o?"header__active-burger":""),children:[Object(d.jsx)("img",{alt:"\u043b\u043e\u0433\u043e\u0442\u0438\u043f",className:"header__logo",src:p}),e.loggedIn?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"header__email-text",children:j}),Object(d.jsx)("button",{onClick:function(){s(!o)},className:"header__button-burger ".concat(o?"header__button-burger_active":"")})]}):Object(d.jsx)(r.b,{to:m,className:"header__navigation header__navigation_link",children:h})]})]})},h=i.a.createContext();var j=function(e){var t=i.a.useContext(h),n=e.card.owner._id===t._id,a=e.card.likes.some((function(e){return e._id===t._id}));return Object(d.jsxs)("article",{className:"element",children:[Object(d.jsx)("button",{"aria-label":"open",type:"button",className:"element__button-image-open",onClick:function(){e.onCardClick(e.card)},children:Object(d.jsx)("img",{alt:e.card.name,className:"element__image",src:e.card.link})}),Object(d.jsx)("button",{type:"button",className:"element__button-delete-post ".concat(n?"element__button-delete-post_active":""),onClick:function(){e.handlePopupDeletingClick(e.card)}}),Object(d.jsxs)("div",{className:"rectangle",children:[Object(d.jsx)("h2",{className:"rectangle__text",children:e.card.name}),Object(d.jsxs)("div",{className:"rectangle__like-box",children:[Object(d.jsx)("button",{type:"button",className:"rectangle__button-like ".concat(a?"rectangle__button-like_active":""),onClick:function(){e.onCardLike(e.card)}}),Object(d.jsx)("p",{className:"rectangle__like-number",children:e.card.likes.length})]})]})]})};var f=function(e){var t=e.handleEditAvatarClick,n=e.handleEditProfileClick,a=e.handleAddPlaceClick,o=e.onCardClick,s=e.cards,r=e.handleCardLike,c=e.onCardDelete,u=e.handlePopupDeletingClick,l=i.a.useContext(h);return Object(d.jsxs)("main",{className:"main",children:[Object(d.jsxs)("section",{className:"profile",children:[Object(d.jsxs)("div",{className:"profile__blackout",children:[Object(d.jsx)("img",{alt:"\u0430\u0432\u0430\u0442\u0430\u0440\u043a\u0430",className:"profile__avatar",src:l.avatar}),Object(d.jsx)("div",{className:"profile__avatar-edit",onClick:t})]}),Object(d.jsxs)("div",{className:"profile-info",children:[Object(d.jsxs)("div",{className:"profile-info__title-button",children:[Object(d.jsx)("h1",{className:"profile-info__title",children:l.name}),Object(d.jsx)("button",{"aria-label":"edit",type:"button",className:"button button_type_edit",onClick:n})]}),Object(d.jsx)("p",{className:"profile-info__subtitle",children:l.about})]}),Object(d.jsx)("button",{"aria-label":"add",type:"button",className:"button button_type_add",onClick:a})]}),Object(d.jsx)("section",{className:"elements",children:s.map((function(e){return Object(d.jsx)(j,{handlePopupDeletingClick:u,card:e,onCardClick:o,onCardLike:r,onCardDelete:c},e._id)}))})]})};var O=function(){return Object(d.jsx)("footer",{className:"footer",children:Object(d.jsx)("p",{className:"footer__text",children:"\xa9 2021 Mesto Russia"})})};var v=function(e){return Object(d.jsx)("div",{className:"popup popup-images ".concat(""!==e.card.link?"popup_opened":""),onMouseDown:function(t){t.target.classList.contains("popup")&&e.onClose()},children:Object(d.jsxs)("div",{className:"popup__image-container",children:[Object(d.jsx)("img",{alt:e.card.name,className:"popup__image-open",src:e.card.link}),Object(d.jsx)("h2",{className:"popup__image-text",children:e.card.name}),Object(d.jsx)("button",{"aria-label":"Close",type:"button",className:"popup__button-close popup__button-close_image",onClick:e.onClose})]})})},g=n(15),_=n(16),x=new(function(){function e(t){var n=t.baseUrl,a=t.headers;Object(g.a)(this,e),this._baseUrl=n,this._headers=a}return Object(_.a)(e,[{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/cards"),{method:"GET",headers:this._headers}).then((function(t){return e._responseFromServer(t)}))}},{key:"sendingCardServer",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then((function(e){return t._responseFromServer(e)}))}},{key:"cardLikeLink",value:function(e,t){var n=this;return t?fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then((function(e){return n._responseFromServer(e)})):this.cardDelLikeLink(e)}},{key:"cardDelLikeLink",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._responseFromServer(e)}))}},{key:"cardDelLink",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._responseFromServer(e)}))}},{key:"getinfouser",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/users/me"),{method:"GET",headers:this._headers}).then((function(t){return e._responseFromServer(t)}))}},{key:"getinfouserDispatch",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return t._responseFromServer(e)}))}},{key:"dispatchAvatarUser",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.avatar})}).then((function(e){return t._responseFromServer(e)}))}},{key:"_responseFromServer",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-29",headers:{authorization:"056e8062-0d04-4d77-b94c-9ff9ca769110","Content-Type":"application/json"}});var C=function(e){return Object(d.jsx)("div",{className:"popup ".concat(e.name," ").concat(e.isOpen?"popup_opened":""),onMouseDown:function(t){t.target.classList.contains("popup")&&e.onClose()},children:Object(d.jsxs)("div",{className:"popup__container",children:[Object(d.jsx)("h2",{className:"popup__text",children:e.title}),Object(d.jsxs)("form",{onSubmit:e.onSubmit,className:"popup__form",name:e.name,noValidate:!0,children:[e.children,Object(d.jsx)("button",{type:"submit",className:"popup__submit-button ".concat(e.activeValid?"popup__submit-button_hover":"popup__button_disabled"),disabled:!e.activeValid,children:e.textButton})]}),Object(d.jsx)("button",{"aria-label":"Close",type:"button",className:"popup__button-close",onClick:e.onClose})]})})},S=n(10),N=n(8);function k(){var e=Object(a.useState)({inputOne:"",inputTwo:""}),t=Object(u.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)({inputOne:!1,inputTwo:!1}),s=Object(u.a)(o,2),r=s[0],c=s[1],l=Object(a.useState)({inputOne:!1,inputTwo:!1}),p=Object(u.a)(l,2),d=p[0],b=p[1],m=Object(a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{inputOne:"",inputTwo:""},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{inputOne:!1,inputTwo:!1},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{inputOne:!1,inputTwo:!1};i(e),c(t),b(n)}),[i,c,b]);return{values:n,handleChange:function(e){var t=e.target,a=t.name,o=t.value;i(Object(N.a)(Object(N.a)({},n),{},Object(S.a)({},a,o))),c(Object(N.a)(Object(N.a)({},r),{},Object(S.a)({},a,e.target.validationMessage))),b(Object(N.a)(Object(N.a)({},d),{},Object(S.a)({},a,e.target.validity.valid)))},errors:r,isValid:d,resetForm:m,setValues:i,setIsValid:b}}var E=function(e){var t=k(),n=t.values,a=t.handleChange,o=t.errors,s=t.isValid,r=t.setValues,c=t.resetForm,u=t.setIsValid,l=i.a.useContext(h);return i.a.useEffect((function(){e.isOpen&&(r({inputOne:l.name,inputTwo:l.about}),u({inputOne:!0,inputTwo:!0}))}),[e.isOpen,l,r,u]),Object(d.jsxs)(C,{onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:n.inputOne,about:n.inputTwo}),c()},isOpen:e.isOpen,onClose:function(){e.onClose(),c()},name:"popup-profile",textButton:e.textButton,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",activeValid:!0===s.inputOne&&!0===s.inputTwo,children:[Object(d.jsx)("input",{value:n.inputOne,onChange:a,type:"text",id:"user-name",name:"inputOne",placeholder:"\u0418\u043c\u044f",className:"popup__filed",minLength:2,maxLength:40,autoComplete:"off",required:!0}),Object(d.jsx)("span",{className:"error user-name-error ".concat(s.inputOne?"":"popup__error_visible"),children:o.inputOne}),Object(d.jsx)("input",{value:n.inputTwo,onChange:a,type:"text",id:"user-job",name:"inputTwo",placeholder:"\u0420\u0430\u0431\u043e\u0442\u0430",className:"popup__filed",minLength:2,maxLength:200,autoComplete:"off",required:!0}),Object(d.jsx)("span",{className:"error user-job-error ".concat(s.inputTwo?"":"popup__error_visible"),children:o.inputTwo})]})};var y=function(e){var t=i.a.useState(""),n=Object(u.a)(t,2),a=n[0],o=n[1],s=i.a.useState(!1),r=Object(u.a)(s,2),c=r[0],l=r[1],p=i.a.useState(""),b=Object(u.a)(p,2),m=b[0],h=b[1];function j(){o(""),l(!1),h("")}return Object(d.jsxs)(C,{onSubmit:function(t){t.preventDefault(),e.onUpdateAvatar({avatar:a},j)},isOpen:e.isOpen,onClose:function(){e.onClose(),j()},name:"avatar-edit",textButton:e.textButton,title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",activeValid:c,children:[Object(d.jsx)("input",{value:a,onChange:function(e){o(e.target.value),l(e.target.validity.valid),h(e.target.validationMessage)},type:"url",id:"avatar-edit",name:"edit",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",className:"popup__filed",autoComplete:"off",required:!0}),Object(d.jsx)("span",{className:"error avatar-edit-error ".concat(c?"":"popup__error_visible"),children:m})]})},A=function(){function e(t,n){var a=this;Object(g.a)(this,e),this._hasInvalidInput=function(){return a._inputList.some((function(e){return!e.validity.valid}))},this._toggleButtonState=function(){a._hasInvalidInput()?(a._buttonElement.classList.add(a._inactiveButtonClass),a._buttonElement.setAttribute("disabled",!0),a._buttonElement.classList.remove(a._popupSubmitButtonHover)):(a._buttonElement.classList.remove(a._inactiveButtonClass),a._buttonElement.removeAttribute("disabled"),a._buttonElement.classList.add(a._popupSubmitButtonHover))},this._showInputError=function(e,t){var n=a._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(a._inputErrorClass),n.textContent=t,n.classList.add(a._errorClass)},this._hideInputError=function(e){var t=a._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(a._inputErrorClass),t.classList.remove(a._errorClass),t.textContent=""},this._isValid=function(e){e.validity.valid?a._hideInputError(e):a._showInputError(e,e.validationMessage)},this._setEventListeners=function(){a._toggleButtonState(),a._inputList.forEach((function(e){e.addEventListener("input",(function(){a._isValid(e),a._toggleButtonState()}))}))},this.enableValidation=function(){a._formElement.addEventListener("submit",(function(e){e.preventDefault()})),a._setEventListeners()},this._formSelector=t.formSelector,this._inputSelector=t.inputSelector,this._popupSubmitButtonHover=t.popupSubmitButtonHover,this._popopImage=t.popopImage,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formElement=document.querySelector(".".concat(n)),this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}return Object(_.a)(e,[{key:"clearingErrorFields",value:function(){var e=this;this._inputList.forEach((function(t){t.classList.remove(e._inputErrorClass),e._formElement.querySelector(".".concat(t.id,"-error")).classList.remove(e._errorClass)})),this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0),this._buttonElement.classList.remove(this._popupSubmitButtonHover)}}]),e}(),L={formSelector:".popup__form",inputSelector:".popup__filed",popupSubmitButtonHover:"popup__submit-button_hover",popopImage:"popup-images",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},w=".popup-profile",B=".popup-posts",I=".button_type_edit",q=".button_type_add";document.querySelector(w),document.querySelector(B),document.querySelector(I),document.querySelector(q);var T=function(e){var t=i.a.useState({name:"",link:""}),n=Object(u.a)(t,2),a=n[0],o=n[1],s=i.a.useState({}),r=Object(u.a)(s,2),c=r[0],l=r[1];function p(e){o(Object(N.a)(Object(N.a)({},a),{},Object(S.a)({},e.target.name,e.target.value)))}function b(){o({name:"",link:""})}return i.a.useEffect((function(){var e=new A(L,"popup-posts");e.enableValidation(),l(e)}),[]),i.a.useEffect((function(){e.isOpen&&c.clearingErrorFields()}),[e.isOpen,c]),Object(d.jsxs)(C,{onSubmit:function(t){t.preventDefault(),e.handleSubmit({name:a.name,link:a.link},b)},isOpen:e.isOpen,onClose:function(){e.onClose(),b()},name:"popup-posts",textButton:e.textButton,title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",activeValid:!0,children:[Object(d.jsx)("input",{value:a.name,onChange:p,type:"text",id:"name-card",name:"name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",className:"popup__filed",minLength:2,maxLength:30,autoComplete:"off",required:!0}),Object(d.jsx)("span",{className:"error name-card-error"}),Object(d.jsx)("input",{value:a.link,onChange:p,type:"url",id:"link-card",name:"link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",className:"popup__filed",autoComplete:"off",required:!0}),Object(d.jsx)("span",{className:"error link-card-error"})]})};var R=function(e){return Object(d.jsx)(C,{isOpen:e.isOpen,textButton:e.textButton,activeValid:!0,onClose:e.onClose,title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onSubmit:function(t){t.preventDefault(),e.onCardDelete()}})},V="https://auth.nomoreparties.co";function P(e){return e.ok?e.json():Promise.reject(e.status)}var X=function(e){var t=function(t){t.preventDefault(),e.handleSubmit()};return Object(d.jsxs)("div",{className:"register",children:[Object(d.jsx)("p",{className:"register__welcome",children:e.welcomeText}),Object(d.jsxs)("form",{onSubmit:t,className:"register__form",children:[e.children,Object(d.jsx)("button",{type:"submit",onSubmit:t,className:"register__button ".concat(e.activeValid?"register__button_hover":"register__button_disabled"),disabled:!e.activeValid,children:e.textButton})]}),e.loginElement]})};var D=Object(l.h)((function(e){var t=k(),n=t.values,a=t.handleChange,i=t.errors,o=t.isValid;return Object(d.jsxs)(X,{textButton:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",welcomeText:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",loginElement:Object(d.jsxs)("div",{className:"register__signin",children:[Object(d.jsx)("p",{className:"register__subtitle",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(d.jsx)(r.b,{to:"/sign-in",className:"register__login-link",children:"\u0412\u043e\u0439\u0442\u0438"})]}),handleSubmit:function(){var t,a;(t=n.inputOne,a=n.inputTwo,fetch("".concat(V,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:t,password:a})}).then(P)).then((function(t){400!==t.statusCode&&(e.setEmail(n.inputOne),e.setLoggedIn(!0),e.setIsSuccessfulRegistrationOpen(!0),e.history.push("/mainpart"))})).catch((function(t){console.log(t),e.setIsFailureRegistrationOpen(!0)}))},activeValid:!0===o.inputOne&&!0===o.inputTwo,children:[Object(d.jsx)("input",{value:n.inputOne,placeholder:"Email",id:"email",name:"inputOne",type:"email",onChange:a,minLength:2,maxLength:100,className:"register__filed",autoComplete:"off"}),Object(d.jsx)("span",{className:"error ".concat(o.inputOne?"":"popup__error_visible"),children:i.inputOne}),Object(d.jsx)("input",{value:n.inputTwo,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",id:"password",name:"inputTwo",type:"password",onChange:a,minLength:5,maxLength:30,className:"register__filed",autoComplete:"off"}),Object(d.jsx)("span",{className:"error ".concat(o.inputTwo?"":"popup__error_visible"),children:i.inputTwo})]})}));var U=Object(l.h)((function(e){var t=k(),n=t.values,a=t.handleChange,i=t.errors,o=t.isValid;return Object(d.jsxs)(X,{textButton:"\u0412\u043e\u0439\u0442\u0438",welcomeText:"\u0412\u0445\u043e\u0434",handleSubmit:function(){var t,a;(t=n.inputOne,a=n.inputTwo,fetch("".concat(V,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:t,password:a})}).then(P)).then((function(t){localStorage.setItem("jwt",t.token),e.checkToken()})).catch((function(t){console.log(t),e.setIsFailureRegistrationOpen(!0)}))},activeValid:!0===o.inputOne&&!0===o.inputTwo,children:[Object(d.jsx)("input",{placeholder:"Email",id:"email",name:"inputOne",type:"email",value:n.inputOne,onChange:a,className:"register__filed",minLength:2,maxLength:100,autoComplete:"off",required:!0}),Object(d.jsx)("span",{className:"error ".concat(o.inputOne?"":"popup__error_visible"),children:i.inputOne}),Object(d.jsx)("input",{placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",id:"password",name:"inputTwo",type:"password",value:n.inputTwo,onChange:a,className:"register__filed",minLength:5,maxLength:30,autoComplete:"off",required:!0}),Object(d.jsx)("span",{className:"error ".concat(o.inputTwo?"":"popup__error_visible"),children:i.inputTwo})]})})),H=n(25),F=["component"],J=function(e){var t=e.component,n=Object(H.a)(e,F);return n.loggedIn?Object(d.jsx)(t,Object(N.a)({},n)):Object(d.jsx)(l.a,{to:"/sign-in"})};var M=function(e){return Object(d.jsx)("div",{className:"popup ".concat(e.isOpen?"popup_opened":""),onMouseDown:function(t){t.target.classList.contains("popup")&&e.onClose()},children:Object(d.jsxs)("div",{className:"popup__container",children:[Object(d.jsx)("img",{alt:"\u0438\u043a\u043e\u043d\u043a\u0430",className:"popup__icon",src:e.image}),Object(d.jsx)("p",{className:"popup__title",children:e.text}),Object(d.jsx)("button",{"aria-label":"Close",type:"button",className:"popup__button-close",onClick:e.onClose})]})})};var Z=Object(l.h)((function(e){var t=i.a.useState(!1),n=Object(u.a)(t,2),a=n[0],o=n[1],s=i.a.useState(""),r=Object(u.a)(s,2),p=r[0],b=r[1],j=i.a.useState(!1),g=Object(u.a)(j,2),_=g[0],C=g[1],S=i.a.useState(!1),N=Object(u.a)(S,2),k=N[0],A=N[1],L=i.a.useState(!1),w=Object(u.a)(L,2),B=w[0],I=w[1],q=i.a.useState(!1),P=Object(u.a)(q,2),X=P[0],H=P[1],F=i.a.useState(!1),Z=Object(u.a)(F,2),K=Z[0],Y=Z[1],G=i.a.useState(!1),Q=Object(u.a)(G,2),z=Q[0],W=Q[1],$=i.a.useState({}),ee=Object(u.a)($,2),te=ee[0],ne=ee[1],ae=i.a.useState("\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),ie=Object(u.a)(ae,2),oe=ie[0],se=ie[1],re=i.a.useState("\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),ce=Object(u.a)(re,2),ue=ce[0],le=ce[1],pe=i.a.useState("\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435"),de=Object(u.a)(pe,2),be=de[0],me=de[1],he=i.a.useState("\u0414\u0430"),je=Object(u.a)(he,2),fe=je[0],Oe=je[1],ve=i.a.useState([]),ge=Object(u.a)(ve,2),_e=ge[0],xe=ge[1],Ce=i.a.useState({}),Se=Object(u.a)(Ce,2),Ne=Se[0],ke=Se[1],Ee=i.a.useState({name:"",link:""}),ye=Object(u.a)(Ee,2),Ae=ye[0],Le=ye[1];function we(){var t;(t=localStorage.getItem("jwt"),fetch("".concat(V,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).then((function(e){return e}))).then((function(t){t&&(o(!0),b(t.data.email),e.history.push("/mainpart"))}))}function Be(){C(!1),A(!1),I(!1),Le({name:"",link:""}),H(!1),ne({}),W(!1),Y(!1)}return i.a.useEffect((function(){localStorage.getItem("jwt")&&we()}),[]),i.a.useEffect((function(){Promise.all([x.getInitialCards(),x.getinfouser()]).then((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];ke(a),xe(n)})).catch((function(e){return console.log(e)}))}),[]),i.a.useEffect((function(){var e=function(e){"Escape"===e.key&&Be()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[]),Object(d.jsx)(h.Provider,{value:Ne,children:Object(d.jsxs)("div",{className:"page",children:[Object(d.jsx)(m,{loggedIn:a,email:p,setLoggedIn:o}),Object(d.jsxs)(l.d,{children:[Object(d.jsx)(l.b,{path:"/sign-in",children:Object(d.jsx)(U,{setIsFailureRegistrationOpen:W,checkToken:we})}),Object(d.jsx)(l.b,{path:"/sign-up",children:Object(d.jsx)(D,{setIsSuccessfulRegistrationOpen:Y,setIsFailureRegistrationOpen:W,setLoggedIn:o,setEmail:b})}),Object(d.jsx)(J,{path:"/mainpart",loggedIn:a,component:f,cards:_e,handlePopupDeletingClick:function(e){ne(e),H(!0)},handleEditAvatarClick:function(){C(!0)},handleEditProfileClick:function(){A(!0)},handleAddPlaceClick:function(){I(!0)},onCardClick:function(e){Le({name:e.name,link:e.link})},handleCardLike:function(e){var t=e.likes.some((function(e){return e._id===Ne._id}));x.cardLikeLink(e._id,!t).then((function(e){var t=_e.map((function(t){return t._id===e._id?e:t}));xe(t)})).catch((function(e){return console.log(e)}))},children:Object(d.jsx)(O,{})}),Object(d.jsx)(l.b,{exact:!0,path:"/",children:a?Object(d.jsx)(l.a,{to:"/mainpart"}):Object(d.jsx)(l.a,{to:"/sign-in"})})]}),Object(d.jsx)(E,{textButton:ue,onUpdateUser:function(e){le("\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435..."),x.getinfouserDispatch(e).then((function(e){ke(e),A(!1)})).catch((function(e){return console.log(e)})).finally((function(){le("\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")}))},isOpen:k,onClose:Be}),Object(d.jsx)(y,{textButton:oe,onUpdateAvatar:function(e,t){se("\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435..."),x.dispatchAvatarUser(e).then((function(e){ke(e),C(!1),t()})).catch((function(e){return console.log(e)})).finally((function(){se("\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")}))},isOpen:_,onClose:Be}),Object(d.jsx)(T,{textButton:be,isOpen:B,onClose:Be,handleSubmit:function(e,t){me("\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435..."),x.sendingCardServer(e).then((function(e){xe([e].concat(Object(c.a)(_e))),I(!1),t()})).catch((function(e){return console.log(e)})).finally((function(){me("\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435")}))}}),Object(d.jsx)(R,{onCardDelete:function(){Oe("\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435..."),x.cardDelLink(te._id).then((function(e){xe((function(e){return e.filter((function(e){return e._id!==te._id}))})),H(!1)})).catch((function(e){return console.log(e)})).finally((function(){Oe("\u0414\u0430")}))},card:te,isOpen:X,onClose:Be,textButton:fe}),Object(d.jsx)(v,{card:Ae,onClose:Be}),Object(d.jsx)(M,{isOpen:K,text:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!",image:"data:image/png;base64,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",link:"/mainpart",onClose:Be}),Object(d.jsx)(M,{isOpen:z,text:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.",image:"data:image/png;base64,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",link:"/sign-in",onClose:Be})]})})})),K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),a(e),i(e),o(e),s(e)}))};s.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(r.a,{children:Object(d.jsx)(Z,{})})}),document.getElementById("root")),K()}},[[37,1,2]]]);
//# sourceMappingURL=main.25d1bad8.chunk.js.map